<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generates balance statistics on covariates in relation to an observed treatment variable. It is a generic function that dispatches to the method corresponding to the class of the first argument."><title>Display Balance Statistics in a Table — bal.tab • cobalt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Display Balance Statistics in a Table — bal.tab"><meta property="og:description" content="Generates balance statistics on covariates in relation to an observed treatment variable. It is a generic function that dispatches to the method corresponding to the class of the first argument."><meta property="og:image" content="https://ngreifer.github.io/cobalt/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cobalt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.5.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/cobalt.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/other-packages.html">Using `cobalt` with Other Preprocessing Packages</a>
    <a class="dropdown-item" href="../articles/segmented-data.html">Using `cobalt` with Clustered, Multiply Imputed, and Other Segmented Data</a>
    <a class="dropdown-item" href="../articles/longitudinal-treat.html">Using `cobalt` with Longitudinal Treatments</a>
    <a class="dropdown-item" href="../articles/love.plot.html">Using `love.plot()` To Generate Love Plots</a>
    <a class="dropdown-item" href="../articles/optimizing-balance.html">Optimizing Tuning Parameters for Balance</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ngreifer/cobalt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Display Balance Statistics in a Table</h1>
      <small class="dont-index">Source: <a href="https://github.com/ngreifer/cobalt/blob/HEAD/R/bal.tab.R" class="external-link"><code>R/bal.tab.R</code></a></small>
      <div class="d-none name"><code>bal.tab.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates balance statistics on covariates in relation to an observed treatment variable. It is a generic function that dispatches to the method corresponding to the class of the first argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bal.tab</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## # Arguments common across all input types:</span></span>
<span><span class="co">## bal.tab(x,</span></span>
<span><span class="co">##         stats,</span></span>
<span><span class="co">##         int = FALSE,</span></span>
<span><span class="co">##         poly = 1,</span></span>
<span><span class="co">##         distance = NULL,</span></span>
<span><span class="co">##         addl = NULL,</span></span>
<span><span class="co">##         data = NULL,</span></span>
<span><span class="co">##         continuous,</span></span>
<span><span class="co">##         binary,</span></span>
<span><span class="co">##         s.d.denom,</span></span>
<span><span class="co">##         thresholds = NULL,</span></span>
<span><span class="co">##         weights = NULL,</span></span>
<span><span class="co">##         cluster = NULL,</span></span>
<span><span class="co">##         imp = NULL,</span></span>
<span><span class="co">##         pairwise = TRUE,</span></span>
<span><span class="co">##         s.weights = NULL,</span></span>
<span><span class="co">##         abs = FALSE,</span></span>
<span><span class="co">##         subset = NULL,</span></span>
<span><span class="co">##         quick = TRUE,</span></span>
<span><span class="co">##         ...)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>an input object on which to assess balance. Can be the output of a call to a balancing function in another package or a formula or data frame. Input to this argument will determine which <code>bal.tab()</code> method is used. Each input type has its own documentation page, which is linked in the See Also section below. Some input types require or allow additional arguments to be specified. For inputs with no dedicated method, the <a href="bal.tab.default.html">default method</a> will be dispatched. See Details below.</p></dd>


<dt>...</dt>
<dd><p>for some input types, other arguments that are required or allowed. Otherwise, further arguments to control display of output. See <a href="display-options.html">display options</a> for details.</p></dd>


<dt>stats</dt>
<dd><p><code>character</code>; which statistic(s) should be reported. See <code><a href="balance-statistics.html">stats()</a></code> for allowable options. For binary and multi-category treatments, <code>"mean.diffs"</code> (i.e., mean differences) is the default. For continuous treatments, <code>"correlations"</code> (i.e., treatment-covariate Pearson correlations) is the default. Multiple options are allowed.</p></dd>


<dt>int</dt>
<dd><p><code>logical</code> or <code>numeric</code>; whether or not to include 2-way interactions of covariates included in <code>covs</code> and in <code>addl</code>. If <code>numeric</code>, will be passed to <code>poly</code> as well.</p></dd>


<dt>poly</dt>
<dd><p><code>numeric</code>; the highest polynomial of each continuous covariate to display. For example, if 2, squares of each continuous covariate will be displayed (in addition to the covariate itself); if 3, squares and cubes of each continuous covariate will be displayed, etc. If 1, the default, only the base covariate will be displayed. If <code>int</code> is numeric, <code>poly</code> will take on the value of <code>int</code>.</p></dd>


<dt>distance</dt>
<dd><p>an optional formula or data frame containing distance values (e.g., propensity scores) or a character vector containing their names. If a formula or variable names are specified, <code>bal.tab()</code> will look in the argument to <code>data</code>, if specified. For longitudinal treatments, can be a list of allowable arguments, one for each time point.</p></dd>


<dt>addl</dt>
<dd><p>an optional formula or data frame containing additional covariates for which to present balance or a character vector containing their names. If a formula or variable names are specified, <code>bal.tab()</code> will look in the arguments to the input object, <code>covs</code>, and <code>data</code>, if specified. For longitudinal treatments, can be a list of allowable arguments, one for each time point.</p></dd>


<dt>data</dt>
<dd><p>an optional data frame containing variables named in other arguments. For some input object types, this is required.</p></dd>


<dt>continuous</dt>
<dd><p>whether mean differences for continuous variables should be standardized (<code>"std"</code>) or raw (<code>"raw"</code>). Default <code>"std"</code>. Abbreviations allowed. This option can be set globally using <code><a href="set.cobalt.options.html">set.cobalt.options()</a></code>.</p></dd>


<dt>binary</dt>
<dd><p>whether mean differences for binary variables (i.e., difference in proportion) should be standardized (<code>"std"</code>) or raw (<code>"raw"</code>). Default <code>"raw"</code>. Abbreviations allowed. This option can be set globally using <code><a href="set.cobalt.options.html">set.cobalt.options()</a></code>.</p></dd>


<dt>s.d.denom</dt>
<dd><p><code>character</code>; how the denominator for standardized mean differences should be calculated, if requested. See <code><a href="balance-summary.html">col_w_smd()</a></code> for allowable options. If weights are supplied, each set of weights should have a corresponding entry to <code>s.d.denom</code>. Abbreviations allowed. If left blank and weights, subclasses, or matching strata are supplied, <code>bal.tab()</code> will figure out which one is best based on the <code>estimand</code>, if given (for ATT, <code>"treated"</code>; for ATC, <code>"control"</code>; otherwise <code>"pooled"</code>) and other clues if not.</p></dd>


<dt>thresholds</dt>
<dd><p>a named vector of balance thresholds, where the name corresponds to the statistic (i.e., in <code>stats</code>) that the threshold applies to. For example, to request thresholds on mean differences and variance ratios, one can set <code>thresholds = c(m = .05, v = 2)</code>. Requesting a threshold automatically requests the display of that statistic. When specified, extra columns are inserted into the Balance table describing whether the requested balance statistics exceeded the threshold or not. Summary tables tallying the number of variables that exceeded and were within the threshold and displaying the variables with the greatest imbalance on that balance measure are added to the output.</p></dd>


<dt>weights</dt>
<dd><p>a vector, list, or <code>data.frame</code> containing weights for each unit, or a string containing the names of the weights variables in <code>data</code>, or an object with a <code><a href="get.w.html">get.w()</a></code> method or a list thereof. The weights can be, e.g., inverse probability weights or matching weights resulting from a matching algorithm.</p></dd>


<dt>cluster</dt>
<dd><p>either a vector containing cluster membership for each unit or a string containing the name of the cluster membership variable in <code>data</code> or the input object. See <code><a href="class-bal.tab.cluster.html">bal.tab.cluster()</a></code> for details.</p></dd>


<dt>imp</dt>
<dd><p>either a vector containing imputation indices for each unit or a string containing the name of the imputation index variable in <code>data</code> or the input object. See <code><a href="class-bal.tab.imp.html">bal.tab.imp()</a></code> for details. Not necessary if <code>data</code> is a <code>mids</code> object.</p></dd>


<dt>pairwise</dt>
<dd><p>whether balance should be computed for pairs of treatments or for each treatment against all groups combined. See <code><a href="class-bal.tab.multi.html">bal.tab.multi()</a></code> for details. This can also be used with a binary treatment to assess balance with respect to the full sample.</p></dd>


<dt>s.weights</dt>
<dd><p>Optional; either a vector containing sampling weights for each unit or a string containing the name of the sampling weight variable in <code>data</code>. These function like regular weights except that both the adjusted and unadjusted samples will be weighted according to these weights if weights are used.</p></dd>


<dt>abs</dt>
<dd><p><code>logical</code>; whether displayed balance statistics should be in absolute value or not.</p></dd>


<dt>subset</dt>
<dd><p>a <code>logical</code> or <code>numeric</code> vector denoting whether each observation should be included or which observations should be included. If <code>logical</code>, it should have length equal to the number of units. <code>NA</code>s will be treated as <code>FALSE</code>. This can be used as an alternative to <code>cluster</code> to examine balance on subsets of the data.</p></dd>


<dt>quick</dt>
<dd><p><code>logical</code>; if <code>TRUE</code>, will not compute any values that will not be displayed. Set to <code>FALSE</code> if computed values not displayed will be used later.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>"bal.tab"</code>. The use of continuous treatments, subclasses, clusters, and/or imputations will also cause the object to inherit other classes. The class <code>"bal.tab"</code> has its own <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method (<code><a href="print.bal.tab.html">print.bal.tab()</a></code>), which formats the output nicely and in accordance with print-related options given in the call to <code>bal.tab()</code>, and which can be called with its own options.</p>


<p>For scenarios with binary point treatments and no subclasses, imputations, or clusters, the following are the elements of the <code>bal.tab</code> object:</p>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>\item{Balance}{A data frame containing balance information <span class="cf">for</span> each covariate. Balance contains the following columns, with additional columns present when other balance statistics are requested<span class="sc">:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        \itemize{</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">Type</span><span class="st">`</span><span class="sc">:</span> Whether the covariate is binary, continuous, or a measure of <span class="fu">distance</span> (e.g., the propensity score).}</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">M.0.Un</span><span class="st">`</span><span class="sc">:</span> The mean of the control group prior to adjusting.}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">SD.0.Un</span><span class="st">`</span><span class="sc">:</span> The standard deviation of the control group prior to adjusting.}</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">M.1.Un</span><span class="st">`</span><span class="sc">:</span> The mean of the treated group prior to adjusting.}</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">SD.1.Un</span><span class="st">`</span><span class="sc">:</span> The standard deviation of the treated group prior to adjusting.}</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">Diff.Un</span><span class="st">`</span><span class="sc">:</span> <span class="fu">The</span> (standardized) difference <span class="cf">in</span> means between the two groups prior to adjusting. See the <span class="st">`</span><span class="at">binary</span><span class="st">`</span> and <span class="st">`</span><span class="at">continuous</span><span class="st">`</span> arguments on the <span class="st">`</span><span class="at">bal.tab</span><span class="st">`</span> method pages to determine whether standardized or raw mean differences are being reported. By default, the standardized mean difference is displayed <span class="cf">for</span> continuous variables and the raw mean <span class="fu">difference</span> (difference <span class="cf">in</span> proportion) is displayed <span class="cf">for</span> binary variables.}</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">M.0.Adj</span><span class="st">`</span><span class="sc">:</span> The mean of the control group after adjusting.}</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">SD.0.Adj</span><span class="st">`</span><span class="sc">:</span> The standard deviation of the control group after adjusting.}</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">M.1.Adj</span><span class="st">`</span><span class="sc">:</span> The mean of the treated group after adjusting.}</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">SD.1.Adj</span><span class="st">`</span><span class="sc">:</span> The standard deviation of the treated group after adjusting.}</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">Diff.Adj</span><span class="st">`</span><span class="sc">:</span> <span class="fu">The</span> (standardized) difference <span class="cf">in</span> means between the two groups after adjusting. See the <span class="st">`</span><span class="at">binary</span><span class="st">`</span> and <span class="st">`</span><span class="at">continuous</span><span class="st">`</span> arguments on the <span class="st">`</span><span class="at">bal.tab</span><span class="st">`</span> method pages to determine whether standardized or raw mean differences are being reported. By default, the standardized mean difference is displayed <span class="cf">for</span> continuous variables and the raw mean <span class="fu">difference</span> (difference <span class="cf">in</span> proportion) is displayed <span class="cf">for</span> binary variables.}</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            \item{<span class="st">`</span><span class="at">M.Threshold</span><span class="st">`</span><span class="sc">:</span> Whether or not the calculated mean difference after adjusting exceeds or is within the threshold given by <span class="st">`</span><span class="at">thresholds</span><span class="st">`</span>.  If a threshold <span class="cf">for</span> mean differences is not specified, this column will be <span class="st">`</span><span class="at">NA</span><span class="st">`</span>.}</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        }}</span></code></pre><p></p></div>
<dl><dt>Balanced.Means</dt>
<dd><p>If a threshold on mean differences is specified, a table tallying the number of variables that exceed or are within the threshold.</p></dd>

<dt>Max.Imbalance.Means</dt>
<dd><p>If a threshold on mean differences is specified, a table displaying the variable with the greatest absolute mean difference.</p></dd>

<dt>Observations</dt>
<dd><p>A table displaying the sample sizes before and after adjusting. Often the effective sample size (ESS) will be displayed. See Details.</p></dd>

<dt>call</dt>
<dd><p>The original function call, if adjustment was performed by a function in another package.</p></dd>


</dl><p>If the treatment is continuous, instead of producing mean differences, <code>bal.tab()</code> will produce correlations between the covariates and the treatment. The corresponding entries in the output will be "Corr.Un", "Corr.Adj", and "R.Threshold" (and accordingly for the balance tally and maximum imbalance tables).</p>


<p>If multiple weights are supplied, <code>"Adj"</code> in <code>Balance</code> will be replaced by the provided names of the sets of weights, and extra columns will be added for each set of weights. Additional columns and rows for other items in the output will be created as well.</p>


<p>For <code>bal.tab</code> output with subclassification, see <code><a href="class-bal.tab.subclass.html">bal.tab.subclass()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>bal.tab()</code> performs various calculations on the the data objects given. This page details the arguments and calculations that are used across <code>bal.tab()</code> methods.</p><div class="section">
<h3 id="with-binary-point-treatments">With Binary Point Treatments<a class="anchor" aria-label="anchor" href="#with-binary-point-treatments"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Balance statistics can be requested with the [<span class="st">`</span><span class="at">stats()</span><span class="st">`</span>][balance<span class="sc">-</span>statistics] argument. The default balance statistic <span class="cf">for</span> mean differences <span class="cf">for</span> continuous variables is the standardized mean difference, which is the difference <span class="cf">in</span> the means divided by a measure of <span class="fu">spread</span> (i.e., a d<span class="sc">-</span>type effect size measure). This is the default because it puts the mean differences on the same scale <span class="cf">for</span> comparison with each other and with a given threshold. For binary variables, the default balance statistic is the raw difference <span class="cf">in</span> proportion. Although standardized differences <span class="cf">in</span> proportion can be computed, raw differences <span class="cf">in</span> proportion <span class="cf">for</span> binary variables are already on the same scale, and computing the standardized difference <span class="cf">in</span> proportion can obscure the true difference <span class="cf">in</span> proportion by dividing the difference <span class="cf">in</span> proportion by a number that is itself a <span class="cf">function</span> of the observed proportions.</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Standardized mean differences are calculated using [<span class="fu">col_w_smd</span>()] as follows<span class="sc">:</span> the numerator is the mean of the treated group minus the mean of the control group, and the denominator is a measure of spread calculated <span class="cf">in</span> accordance with the argument to <span class="st">`</span><span class="at">s.d.denom</span><span class="st">`</span> or the default of the specific method used. Common approaches <span class="cf">in</span> the literature include using the standard deviation of the treated group or using the <span class="st">"pooled"</span> standard <span class="fu">deviation</span> (i.e., the square root of the mean of the group variances) <span class="cf">in</span> calculating standardized mean differences. The computed spread <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> uses is always that of the full, unadjusted <span class="fu">sample</span> (i.e., before matching, weighting, or subclassification), as recommended by <span class="fu">Stuart</span> (<span class="dv">2010</span>).</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>Prior to computation, all variables are checked <span class="cf">for</span> variable type, which allows users to differentiate balance statistic calculations based on type using the arguments to <span class="st">`</span><span class="at">continuous</span><span class="st">`</span> and <span class="st">`</span><span class="at">binary</span><span class="st">`</span>. First, <span class="cf">if</span> a given covariate is numeric and has only <span class="dv">2</span> levels, it is converted into a <span class="fu">binary</span> (<span class="dv">0</span>,<span class="dv">1</span>) variable. If <span class="dv">0</span> is a value <span class="cf">in</span> the original variable, it retains its value and the other value is converted to <span class="dv">1</span>; otherwise, the lower value is converted to <span class="dv">0</span> and the other to <span class="fl">1.</span> Next, <span class="cf">if</span> the covariate is not numeric or <span class="fu">logical</span> (i.e., is a character or factor variable), it will be split into new binary variables, named with the original variable and the value, separated by an underscore. Otherwise, the covariate will be used as is and treated as a continuous variable.</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Variance ratios are computed within<span class="sc">-</span>sample using [<span class="fu">col_w_vr</span>()], with the larger of the two variances <span class="cf">in</span> the numerator <span class="cf">if</span> <span class="st">`</span><span class="at">abs = TRUE</span><span class="st">`</span>, yielding values greater than or equal to <span class="fl">1.</span> Variance ratios are not calculated <span class="cf">for</span> binary variables since they are only a <span class="cf">function</span> of the group proportions and thus provide the same information as differences <span class="cf">in</span> proportion.</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>When weighting or matching are used, an <span class="st">"effective sample size"</span> is calculated <span class="cf">for</span> each group using the following formula<span class="sc">:</span> \eqn{(\sum w)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> \sum w<span class="sc">^</span><span class="dv">2</span>}. The effective sample size is <span class="st">"approximately the number of observations from a simple random sample that yields an estimate with sampling variation equal to the sampling variation obtained with the weighted comparison observations"</span> (Ridgeway et al., <span class="dv">2016</span>). The calculated number tends to underestimate the true effective sample size of the weighted samples. The number depends on the variability of the weights, so sometimes trimming units with large weights can actually increase the effective sample size, even though units are being down<span class="sc">-</span>weighted. When matching is used, an additional <span class="st">"unweighted"</span> sample size will be displayed indicating the total number of units contributing to the weighted sample.</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>When subclassification is used, the balance tables <span class="cf">for</span> each subclass stored <span class="cf">in</span> <span class="st">`</span><span class="at">$Subclass.Balance</span><span class="st">`</span> use values calculated as described above. For the aggregate balance table stored <span class="cf">in</span> <span class="st">`</span><span class="at">$Balance.Across.Subclass</span><span class="st">`</span>, the values of each statistic are computed as a weighted average of the statistic across subclasses, weighted by the proportion of units <span class="cf">in</span> each subclass. See [<span class="st">`</span><span class="at">bal.tab.subclass()</span><span class="st">`</span>][class<span class="sc">-</span>bal.tab.subclass] <span class="cf">for</span> more details.</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="with-continuous-point-treatments">With Continuous Point Treatments<a class="anchor" aria-label="anchor" href="#with-continuous-point-treatments"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>When continuous treatment variables are considered, the balance statistic calculated is the Pearson correlation between the covariate and treatment. The correlation after adjustment is computed using [<span class="fu">col_w_cov</span>()] as the weighted covariance between the covariate and treatment divided by the product of the standard deviations of the unweighted covariate and treatment, <span class="cf">in</span> an analogous way to how how the weighted standardized mean difference uses an unweighted measure of spread <span class="cf">in</span> its denominator, with the purpose of avoiding the analogous <span class="fu">paradox</span> (i.e., where the covariance decreases but is accompanied by a change <span class="cf">in</span> the standard deviations, thereby distorting the actual resulting balance computed using the weighted standard deviations).</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="with-multi-category-point-treatments">With Multi-Category Point Treatments<a class="anchor" aria-label="anchor" href="#with-multi-category-point-treatments"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>For information on using <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> with multi<span class="sc">-</span>category treatments, see [<span class="st">`</span><span class="at">bal.tab.multi()</span><span class="st">`</span>][class<span class="sc">-</span>bal.tab.multi]. Essentially, <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> compares pairs of treatment groups <span class="cf">in</span> a standard way.</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="with-longitudinal-treatments">With Longitudinal Treatments<a class="anchor" aria-label="anchor" href="#with-longitudinal-treatments"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>For information on using <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> with longitudinal treatments, see [<span class="st">`</span><span class="at">bal.tab.msm()</span><span class="st">`</span>][class<span class="sc">-</span>bal.tab.msm]. Essentially, <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> summarizes balance at each time point and summarizes across time points.</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="with-clustered-or-multiply-imputed-data">With Clustered or Multiply Imputed Data<a class="anchor" aria-label="anchor" href="#with-clustered-or-multiply-imputed-data"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>For information on using <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> with clustered data, see [<span class="st">`</span><span class="at">bal.tab.cluster()</span><span class="st">`</span>][class<span class="sc">-</span>bal.tab.cluster]. For information on using <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> with multiply imputed data, see [<span class="st">`</span><span class="at">bal.tab.imp()</span><span class="st">`</span>][class<span class="sc">-</span>bal.tab.imp]. </span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="quick">Quick<a class="anchor" aria-label="anchor" href="#quick"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Calculations can take some time, especially when there are many variables, interactions, or clusters. When certain values are not printed, by default they are not computed. In particular, variance ratios, KS statistics, and summary tables are not computed when their display has not been requested. This can speed up the overall production of the output when these values are not to be used later. However, when they are to be used later, such as when output is to be further examined with <span class="st">`</span><span class="at">print()</span><span class="st">`</span> or is to be used <span class="cf">in</span> some other way after the original call to <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span>, it may be useful to compute them even <span class="cf">if</span> they are not to be printed initially. To do so, users can set <span class="st">`</span><span class="at">quick = FALSE</span><span class="st">`</span>, which will cause <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> to calculate all values and components it can. Note that <span class="st">`</span><span class="at">love.plot()</span><span class="st">`</span> is fully functional even when <span class="st">`</span><span class="at">quick = TRUE</span><span class="st">`</span> and values are requested that are otherwise not computed <span class="cf">in</span> <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span> with <span class="st">`</span><span class="at">quick = TRUE</span><span class="st">`</span>.</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>If there is missing data <span class="cf">in</span> the <span class="fu">covariates</span> (i.e., <span class="st">`</span><span class="at">NA</span><span class="st">`</span>s <span class="cf">in</span> the covariates provided to <span class="st">`</span><span class="at">bal.tab()</span><span class="st">`</span>), a few additional things happen. A warning will appear mentioning that missing values were present <span class="cf">in</span> the data set. The computed balance summaries will be <span class="cf">for</span> the variables ignoring the missing values. New variables will be created representing missingness indicators <span class="cf">for</span> each variable, named <span class="st">`</span><span class="at">var:&lt;NA&gt;</span><span class="st">`</span> (with <span class="st">`</span><span class="at">var</span><span class="st">`</span> replaced by the actual name of the variable). If <span class="st">`</span><span class="at">int = TRUE</span><span class="st">`</span>, balance <span class="cf">for</span> the pairwise interactions between the missingness indicators will also be computed. These variables are treated like regular variables once created.</span></code></pre><p></p></div>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Ridgeway, G., McCaffrey, D., Morral, A., Burgette, L., &amp; Griffin, B. A. (2016). Toolkit for Weighting and Analysis of Nonequivalent Groups: A tutorial for the twang package. R vignette. RAND.</p>
<p>Stuart, E. A. (2010). Matching Methods for Causal Inference: A Review and a Look Forward. Statistical Science, 25(1), 1-21. <a href="https://doi.org/10.1214/09-STS313" class="external-link">doi:10.1214/09-STS313</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>For information on the use of <code>bal.tab()</code> with specific types of objects, use the following links:</p><ul><li><p><code><a href="bal.tab.matchit.html">bal.tab.matchit()</a></code> for the method for objects returned by <span class="pkg">MatchIt</span>.</p></li>
<li><p><code><a href="bal.tab.weightit.html">bal.tab.weightit()</a></code> for the method for <code>weightit</code> and <code>weightitMSM</code> objects returned by <span class="pkg">WeightIt</span>.</p></li>
<li><p><code><a href="bal.tab.ps.html">bal.tab.ps()</a></code> for the method for <code>ps</code>, <code>mnps</code>, and <code>iptw</code> objects returned by <span class="pkg">twang</span> and for <code>ps.cont</code> objects returned by <span class="pkg">twangContinuous</span>.</p></li>
<li><p><code><a href="bal.tab.Match.html">bal.tab.Match()</a></code> for the method for objects returned by <span class="pkg">Matching</span>.</p></li>
<li><p><code><a href="bal.tab.optmatch.html">bal.tab.optmatch()</a></code> for the method for objects returned by <span class="pkg">optmatch</span>.</p></li>
<li><p><code><a href="bal.tab.cem.match.html">bal.tab.cem.match()</a></code> for the method for objects returned by <span class="pkg">cem</span>.</p></li>
<li><p><code><a href="bal.tab.CBPS.html">bal.tab.CBPS()</a></code> for the method for objects returned by <span class="pkg">CBPS</span>.</p></li>
<li><p><code><a href="bal.tab.ebalance.html">bal.tab.ebalance()</a></code> for the method for objects returned by <span class="pkg">ebal</span>.</p></li>
<li><p><code><a href="bal.tab.designmatch.html">bal.tab.designmatch()</a></code> for the method for objects returned by <span class="pkg">designmatch</span>.</p></li>
<li><p><code><a href="bal.tab.mimids.html">bal.tab.mimids()</a></code> for the method for objects returned by <span class="pkg">MatchThem</span>.</p></li>
<li><p><code><a href="bal.tab.sbwcau.html">bal.tab.sbwcau()</a></code> for the method for objects returned by <span class="pkg">sbw</span>.</p></li>
<li><p><code><a href="bal.tab.formula.html">bal.tab.formula()</a></code> and <code><a href="bal.tab.formula.html">bal.tab.data.frame()</a></code> for the methods for <code>formula</code> and data frame interfaces when the user has covariate values and weights (including matching weights) or subclasses or wants to evaluate balance on an unconditioned data set. For data that corresponds to a longitudinal treatment (i.e., to be analyzed with a marginal structural model), see <code><a href="bal.tab.time.list.html">bal.tab.time.list()</a></code>.</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## See individual pages above for examples with</span></span></span>
<span class="r-in"><span><span class="co">## different inputs, or see vignette("cobalt")</span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

